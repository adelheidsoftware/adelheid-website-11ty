{% extends "layouts/base.njk" %}
{% set pageCriticalStyles = ['css/blog-page.css'] %}

{% set pageHeaderTitle = title %}

{# Grab other posts that arenâ€™t this one for the 'recommended posts' feed #}
{% set recommendedPosts = helpers.getSiblingContent(collections.blog, page) %}
{% set pageHeaderSummary %}
  <col>
  {# Render draft label #}
  {% if draft %}
  <p class="draft-label">(Draft)</p>
  {% endif %}
  {# Render post author #}
  {% if author %}
  <div class="author">
    <b>By {{ author }}</b>
  </div>
  {# Render post date #}
  <div>
    <col>
      <time post-date="{{ date | w3DateFilter }}">{{ date | dateFilter }}</time>
      <time post-time="{{ date | w3DateFilter }}">{{ date | timeFilter }}</time>
    </col>
  </div>
  {% endif %}

  {# Render post tags #}
  {% if tags %}
  <p class="visually-hidden" id="tags-desc">Tags</p>
  <ul class="tags-list" aria-describedby="tags-desc">
    {% for tag in tags %}
      <li>
        <a href="/tag/{{ tag | slug }}/">#{{ tag | title | replace(' ', '') }}</a>
      </li>
    {% endfor %}
  </ul>
  {% endif %}
  </col>
{% endset %}

{% block content %}
  <article>
    {% include "partials/page-header.njk" %}
    
    <div class="[ blog-page-content ] [ flow wrapper ] [ flow-space-700 gap-top-700 ]">
      {{ content | safe }}
    </div>
    {% if recommendedPosts.length > 1 %}
    <footer class="recommended-posts">
      {% set postListItems = recommendedPosts %}
      {% set postListHeadline = 'Check out some of our other posts!' %}
      {% include "partials/post-list.njk" %}
    </footer>
    {% endif %}
  </article>
{% endblock %}